<!DOCTYPE html>
<html lang="en">
<head>
  <base href="$FLUTTER_BASE_HREF">

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="description" content="AeraSync: Compare aerators for shrimp farming with a step-by-step survey and view ranked results.">
  <meta name="keywords" content="AeraSync, aerator comparison, shrimp farming, aquaculture, cost optimization">
  <meta name="author" content="Luis Vinatea">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="AeraSync">
  <meta name="theme-color" content="#1E40AF">

  <meta property="og:title" content="AeraSync - Shrimp Farm Aerator Comparison">
  <meta property="og:description" content="AeraSync: Compare aerators for shrimp farming with a step-by-step survey and view ranked results.">
  <meta property="og:image" content="https://aerasync.vercel.app/icons/aerasync180.webp">
  <meta property="og:url" content="https://aerasync.vercel.app/">
  <meta property="og:type" content="website">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="AeraSync - Shrimp Farm Aerator Comparison">
  <meta name="twitter:description" content="AeraSync: Compare aerators for shrimp farming with a step-by-step survey and view ranked results.">
  <meta name="twitter:image" content="https://aerasync.vercel.app/icons/aerasync180.webp">

  <link rel="apple-touch-icon" sizes="180x180" href="/icons/aerasync180.webp">
  <link rel="icon" type="image/webp" href="/icons/aerasync64.webp">
  <title>AeraSync - Shrimp Farm Aerator Comparison</title>
  <link rel="manifest" href="/manifest.json">
  <link rel="preload" href="/flutter_bootstrap.js" as="script">
</head>
<body>
  <div id="loading-screen" role="status" aria-label="Loading AeraSync application">
    <div class="wave-overlay"></div>
    <div class="loading">
      <picture>
        <source srcset="/icons/aerasync.webp" type="image/webp">
        <img src="/icons/aerasync.png" alt="AeraSync Logo - A stylized wave representing water and aeration" style="width: 200px; height: auto; margin-bottom: 20px;" loading="lazy">
      </picture>
      <h1 lang="en">AeraSync</h1>
      <div class="spinner" aria-hidden="true"></div>
    </div>
  </div>

  <div id="app-container"></div>

  <script src="flutter_bootstrap.js" async></script>

  <script>
    // Register Service Worker for PWA capabilities
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('/flutter_service_worker.js')
          .then(function(registration) {
            console.log('Service Worker registered with scope: ', registration.scope);
          })
          .catch(function(error) {
            console.log('Service Worker registration failed: ', error);
          });
      });
    }

    // Prevent default browser handling for multi-touch
    document.addEventListener('touchstart', function(event) {
      if (event.touches.length > 1) {
        event.stopPropagation();
      }
    }, { passive: false });

    // Handle loading screen
    window.addEventListener('flutter-first-frame', function() {
      var loadingScreen = document.getElementById('loading-screen');
      var appContainer = document.getElementById('app-container');
      if (loadingScreen) {
        loadingScreen.style.opacity = '0';
      }
      if (appContainer) {
        appContainer.style.display = 'block';
      }
      setTimeout(function() {
        if (loadingScreen) {
          loadingScreen.style.display = 'none';
        }
      }, 500);
    });
  </script>
</body>
</html>